<div class="listing-container">
  <div class="listing-wrapper">
    <mat-card class="listing-card">
      <mat-card-content>
        <div class="header">
          <div class="logo-section">
            <mat-icon class="logo-icon">home</mat-icon>
            <h1>EstateHub</h1>
          </div>
          <h2>List Your Property</h2>
          <p class="subtitle">Share your property with thousands of potential buyers</p>
        </div>

        <form [formGroup]="listingForm" (ngSubmit)="onSubmit()" class="listing-form">
          <!-- Basic Information Section -->
          <div class="form-section">
            <h3 class="section-title">
              <mat-icon>info</mat-icon>
              Basic Information
            </h3>
            
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Property Title</mat-label>
              <input matInput
                     formControlName="title"
                     placeholder="e.g., Beautiful 3-bedroom house with garden"
                     autocomplete="off">
              <mat-icon matSuffix>title</mat-icon>
              <mat-error *ngIf="listingForm.get('title')?.invalid && listingForm.get('title')?.touched">
                {{ getErrorMessage('title') }}
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Description</mat-label>
              <textarea matInput
                        formControlName="description"
                        placeholder="Describe your property in detail..."
                        rows="4"
                        maxlength="1000"></textarea>
              <mat-icon matSuffix>description</mat-icon>
              <mat-hint align="end">{{listingForm.get('description')?.value?.length || 0}}/1000</mat-hint>
              <mat-error *ngIf="listingForm.get('description')?.invalid && listingForm.get('description')?.touched">
                {{ getErrorMessage('description') }}
              </mat-error>
            </mat-form-field>

            <div class="row">
              <mat-form-field appearance="outline" class="form-field half-width">
                <mat-label>Property Type</mat-label>
                <mat-select formControlName="type">
                  <mat-option *ngFor="let type of propertyTypes" [value]="type.value">
                    {{ type.label }}
                  </mat-option>
                </mat-select>
                <mat-icon matSuffix>home_work</mat-icon>
                <mat-error *ngIf="listingForm.get('type')?.invalid && listingForm.get('type')?.touched">
                  {{ getErrorMessage('type') }}
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="form-field half-width">
                <mat-label>Price (Million HUF)</mat-label>
                <input matInput
                       formControlName="price"
                       placeholder="0"
                       type="number"
                       min="1">
                <mat-icon matSuffix>attach_money</mat-icon>
                <mat-error *ngIf="listingForm.get('price')?.invalid && listingForm.get('price')?.touched">
                  {{ getErrorMessage('price') }}
                </mat-error>
              </mat-form-field>
            </div>

            <div class="row">
              <mat-form-field appearance="outline" class="form-field half-width">
                <mat-label>Area (m<sup>2</sup>)</mat-label>
                <input matInput
                       formControlName="area"
                       placeholder="0"
                       type="number"
                       min="1">
                <mat-icon matSuffix>square_foot</mat-icon>
                <mat-error *ngIf="listingForm.get('area')?.invalid && listingForm.get('area')?.touched">
                  {{ getErrorMessage('area') }}
                </mat-error>
              </mat-form-field>

              <div class="bedroom-bathroom-row">
                <mat-form-field appearance="outline" class="form-field quarter-width">
                  <mat-label>Bedrooms</mat-label>
                  <input matInput
                         formControlName="bedrooms"
                         placeholder="0"
                         type="number"
                         min="0"
                         max="20">
                  <mat-icon matSuffix>bed</mat-icon>
                  <mat-error *ngIf="listingForm.get('bedrooms')?.invalid && listingForm.get('bedrooms')?.touched">
                    {{ getErrorMessage('bedrooms') }}
                  </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="form-field quarter-width">
                  <mat-label>Bathrooms</mat-label>
                  <input matInput
                         formControlName="bathrooms"
                         placeholder="0"
                         type="number"
                         min="0"
                         max="20">
                  <mat-icon matSuffix>bathtub</mat-icon>
                  <mat-error *ngIf="listingForm.get('bathrooms')?.invalid && listingForm.get('bathrooms')?.touched">
                    {{ getErrorMessage('bathrooms') }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>

          <!-- Location Section -->
          <div class="form-section">
            <h3 class="section-title">
              <mat-icon>location_on</mat-icon>
              Location
            </h3>
            
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Address</mat-label>
              <input matInput
                     formControlName="address"
                     placeholder="Enter full address"
                     autocomplete="street-address">
              <mat-icon matSuffix>home</mat-icon>
              <mat-error *ngIf="listingForm.get('address')?.invalid && listingForm.get('address')?.touched">
                {{ getErrorMessage('address') }}
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="form-field">
              <mat-label>City</mat-label>
              <input matInput
                     formControlName="city"
                     placeholder="Enter city name"
                     autocomplete="address-level2">
              <mat-icon matSuffix>location_city</mat-icon>
              <mat-error *ngIf="listingForm.get('city')?.invalid && listingForm.get('city')?.touched">
                {{ getErrorMessage('city') }}
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Contact Information Section -->
          <div class="form-section">
            <h3 class="section-title">
              <mat-icon>contact_phone</mat-icon>
              Contact Information
            </h3>
            
            <div class="row">
              <mat-form-field appearance="outline" class="form-field half-width">
                <mat-label>Phone Number</mat-label>
                <input matInput
                       formControlName="phoneNumber"
                       placeholder="1234567890"
                       type="tel">
                <mat-icon matSuffix>phone</mat-icon>
                <mat-error *ngIf="listingForm.get('phoneNumber')?.invalid && listingForm.get('phoneNumber')?.touched">
                  {{ getErrorMessage('phoneNumber') }}
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="form-field half-width">
                <mat-label>Email Address</mat-label>
                <input matInput
                       formControlName="email"
                       placeholder="contact@example.com"
                       type="email">
                <mat-icon matSuffix>email</mat-icon>
                <mat-error *ngIf="listingForm.get('email')?.invalid && listingForm.get('email')?.touched">
                  {{ getErrorMessage('email') }}
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <!-- Images Section -->
          <div class="form-section">
            <h3 class="section-title">
              <mat-icon>photo_library</mat-icon>
              Property Images
            </h3>
            
            <div class="image-upload-section">
              <input type="file" 
                     #fileInput 
                     multiple 
                     accept="image/*" 
                     (change)="onImageSelect($event)"
                     style="display: none">
              
              <button type="button" 
                      mat-stroked-button 
                      class="upload-button"
                      (click)="fileInput.click()"
                      [disabled]="selectedImages.length >= maxImages">
                <mat-icon>cloud_upload</mat-icon>
                Upload Images ({{selectedImages.length}}/{{maxImages}})
              </button>
              
              <p class="upload-hint">Upload up to {{maxImages}} high-quality images of your property</p>
              
              <div class="image-preview-grid" *ngIf="imagePreviewUrls.length > 0">
                <div class="image-preview-item" *ngFor="let url of imagePreviewUrls; let i = index">
                  <img [src]="url" [alt]="'Property image ' + (i + 1)">
                  <button type="button" 
                          mat-icon-button 
                          class="remove-image-btn"
                          (click)="removeImage(i)">
                    <mat-icon>close</mat-icon>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button type="button"
                    mat-stroked-button
                    class="back-button"
                    (click)="goBack()">
              <mat-icon>arrow_back</mat-icon>
              Back
            </button>

            <button mat-raised-button
                    color="primary"
                    type="submit"
                    class="submit-button"
                    [disabled]="isLoading">
              <div style="display: flex; align-items: center; gap: 8px;">
                <span *ngIf="!isLoading">List Property</span>
                <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
                <span *ngIf="isLoading">Creating Listing...</span>
              </div>
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>

    <!-- Features Section -->
    <div class="features-section">
      <h3>List with Confidence</h3>
      <div class="feature-list">
        <div class="feature-item">
          <mat-icon>visibility</mat-icon>
          <div>
            <strong>Maximum Exposure</strong>
            <span>Reach thousands of potential buyers</span>
          </div>
        </div>
        <div class="feature-item">
          <mat-icon>security</mat-icon>
          <div>
            <strong>Secure Platform</strong>
            <span>Your data is protected and secure</span>
          </div>
        </div>
        <div class="feature-item">
          <mat-icon>speed</mat-icon>
          <div>
            <strong>Quick Setup</strong>
            <span>List your property in minutes</span>
          </div>
        </div>
        <div class="feature-item">
          <mat-icon>support</mat-icon>
          <div>
            <strong>24/7 Support</strong>
            <span>Get help whenever you need it</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>